# <p align="center">사이버 정보 체계 운용 초급반 시간표 자동 생성 프로젝트 - PRD</p>

## 1. 개요 (Overview)

본 프로젝트는 '사이버 정보 체계 운용 초급반'의 교육 과정을 효율적으로 관리하기 위한 시간표 자동 생성 시스템을 개발하는 것을 목표로 한다. 관리자가 엑셀 파일로 교과목, 시수, 담당 교관 등의 기본 정보를 업로드하고 시작일자를 지정하면, 사전에 정의된 규칙에 따라 전체 교육 과정의 시간표를 자동으로 생성하고 웹 기반 캘린더 UI를 통해 시각적으로 제공한다. 이를 통해 수동 시간표 편성의 번거로움을 해소하고, 교관의 일정을 고려한 정확한 시간표를 신속하게 작성할 수 있다.

---

## 2. 목표 (Goals)

- **자동화:** 엑셀 업로드와 시작일자 입력만으로 전체 교육 과정의 시간표를 자동 생성한다.
- **정확성:** 담당 교관의 개인 일정, 공휴일, 자체 휴무일 등을 반영하여 충돌 없는 시간표를 보장한다.
- **유연성:** 선배정 과목, 평가 일정 등 다양한 규칙을 시스템적으로 처리하여 관리자의 개입을 최소화한다.
- **사용성:** 생성된 시간표를 직관적인 캘린더 UI로 제공하여 가독성과 사용 편의성을 높인다.
- **확장성:** 향후 다른 교육 과정에도 적용할 수 있도록 유연한 구조로 설계한다.

---

## 3. 사용자 페르소나 (User Persona)

- **교육 과정 관리자:**
    - **역할:** 초급반 교육 과정의 전반적인 운영 및 관리를 담당한다.
    - **주요 업무:** 교과목 편성, 교관 배정, 전체 교육 일정 수립 및 공지.
    - **불편함 (Pain Point):** 수동으로 시간표를 작성하면서 발생하는 잦은 수정 작업, 교관들의 개별 일정을 일일이 확인해야 하는 번거로움, 공휴일 및 평가 일정을 고려한 복잡한 계산.
    - **요구사항:** 간단한 정보 입력만으로 규칙에 맞는 시간표가 자동으로 생성되기를 원한다.

---

## 4. 기능 요구사항 (Functional Requirements)

### 4.1. 데이터 관리
- **[P0] 엑셀 파일 업로드:**
    - 관리자는 지정된 양식의 '교과목.xlsx' 파일을 시스템에 업로드할 수 있다.
    - 엑셀 파일의 각 행은 하나의 교과목 정보를 나타내며, '구분', '과목', '시수', '담당교관', '선배정', '평가' 컬럼을 포함한다.
    - 업로드된 데이터는 SQLite 데이터베이스에 저장되어야 한다.
- **[P1] 데이터 편집:**
    - 업로드된 교과목 정보를 웹 UI 상에서 추가, 수정, 삭제할 수 있다. 

### 4.2. 시간표 생성
- **[P0] 생성 시작:**
    - 관리자는 '시작일자'를 선택하고 '시간표 생성' 버튼을 클릭하여 프로세스를 시작할 수 있다.
- **[P0] 선배정 과목 처리 (`선배정` = 1):**
    - '선배정' 값이 1인 과목은 자동 생성 이전에 관리자가 직접 캘린더에서 날짜와 시간을 선택하여 먼저 배정할 수 있다.
    - 해당 과목의 시수만큼 시간을 배정해야 한다.
- **[P0] 자동 배정 과목 처리 (`선배정` = 2):**
    - '선배정' 값이 2인 과목은 엑셀 파일에 명시된 순서대로 빈 시간에 자동으로 배정된다.
- **[P0] 평가 일정 배정 (`평가` = 1):**
    - '평가' 값이 1인 과목은 해당 과목의 모든 수업 시수가 끝난 다음 날 2교시에 1시간의 평가 일정이 자동으로 배정된다.
    - 만약 다음 날이 휴일이거나 다른 일정이 있는 경우, 그다음 평일 2교시에 배정된다.

### 4.3. 일정 규칙 및 제약 조건
- **[P0] 수업 시간:**
    - 하루 수업은 08:00부터 17:30까지를 기준으로 한다. (점심시간 11:35-13:00 제외)
    - 월, 화, 수: 9시간 (08:05-11:35, 13:00-17:25)
    - 목: 8시간 (08:40-11:15, 13:00-17:25)
    - 금: 5시간 (08:40-11:15, 13:00-14:40)
    - 1시간은 45분 수업
- **[P0] 교관 일정 확인:**
    - 시간표 배정 시, 해당 교관의 개인 일정(휴가, 출장 등)을 확인하여 해당 시간에는 수업을 배정하지 않는다.
    - 교관의 개인 일정은 별도의 UI에서 등록 및 관리할 수 있어야 한다.
- **[P0] 휴무일 처리:**
    - 관리자는 공휴일 및 자체 휴무일을 시스템에 등록할 수 있다.
    - 등록된 휴무일에는 수업이 배정되지 않는다.
    - 자체 휴무일은 날짜 단위뿐만 아니라, 특정 날짜의 특정 시간 단위(예: O월 O일 14:00-18:00)로도 지정할 수 있어야 한다.

### 4.4. 프론트엔드 (UI/UX)
- **[P0] 캘린더 뷰:**
    - 생성된 시간표는 `react-big-calendar`를 사용하여 월/주/일 단위로 조회할 수 있다.
    - 캘린더에 표시되는 각 이벤트에는 '과목명', '담당교관' 정보가 표시되어야 한다.
    - 과목별로 색상을 다르게 표시할 수 있어야 한다.

- **[P0] 라우팅:**
    - React Router를 사용하여 아래와 같이 페이지를 분리한다.
        - `/`: 랜딩페이지
        - `/manage`: 관리자 페이지 (메인)
        - `/manage/subjects`: 교과목 정보 관리
        - `/manage/instructors`: 교관 및 교관별 일정 관리
        - `/manage/holidays`: 공휴일 및 휴무일 관리
- **[P1] 반응형 디자인:**
    - TailwindCSS를 사용하여 다양한 화면 크기에서 적절하게 표시되도록 한다.

---

## 5. 비기능 요구사항 (Non-Functional Requirements)
 
- **[P0] 기술 스택:**
    - **프론트엔드:** React, TailwindCSS, react-big-calendar
    - **백엔드:** node express
    - **데이터베이스:** SQLite
- **[P1] 성능:**
    - 시간표 생성 프로세스는 30초 이내에 완료되어야 한다.
    - 페이지 로딩 및 캘린더 뷰 전환이 2초 이내에 이루어져야 한다.
- **[P1] 유지보수성:**
    - 프론트엔드는 기능별 컴포넌트로 명확하게 분리되어야 한다.
    - 백엔드 API는 RESTful 원칙에 따라 설계되어야 한다.

---

## 6. 시스템 아키텍처 (System Architecture)

- **Client (Frontend):**
    - React 기반의 SPA(Single Page Application).
    - 사용자의 입력을 받아 백엔드 API를 호출하고, 응답 데이터를 캘린더 및 테이블 형태로 시각화한다.
- **Server (Backend):**
    - Node.js/Express 기반의 REST API 서버.
    - 엑셀 파싱, 데이터베이스 CRUD, 시간표 생성 로직 등 핵심 비즈니스 로직을 처리한다.
- **Database:**
    - SQLite를 사용하여 모든 데이터를 파일 기반으로 저장한다. (교과목, 교관, 일정, 휴무일 등)

---

## 7. 데이터 모델 (Data Model)

1.  **subjects (교과목)**
    - `id` (PK, INTEGER)
    - `category` (TEXT): 구분
    - `name` (TEXT): 과목명
    - `total_hours` (INTEGER): 시수
    - `instructor_id` (FK, INTEGER): 담당교관 ID
    - `priority_type` (INTEGER): 선배정 타입 (1: 선배정, 2: 자동배정)
    - `has_evaluation` (BOOLEAN): 평가 유무 (0 or 1)
    - `display_order` (INTEGER): 자동배정 순서

2.  **instructors (교관)**
    - `id` (PK, INTEGER)
    - `name` (TEXT, UNIQUE): 교관 이름

3.  **instructor_schedules (교관 일정)**
    - `id` (PK, INTEGER)
    - `instructor_id` (FK, INTEGER): 교관 ID
    - `start_time` (DATETIME): 일정 시작 시간
    - `end_time` (DATETIME): 일정 종료 시간
    - `reason` (TEXT): 사유 (예: 휴가, 출장)

4.  **holidays (휴무일)**
    - `id` (PK, INTEGER)
    - `date` (DATE): 날짜
    - `name` (TEXT): 휴무일 이름 (예: 추석, 자체 휴무)
    - `start_time` (TIME, NULLABLE): 시간 단위 휴무 시작 시간
    - `end_time` (TIME, NULLABLE): 시간 단위 휴무 종료 시간

5.  **timetable (생성된 시간표)**
    - `id` (PK, INTEGER)
    - `subject_id` (FK, INTEGER): 교과목 ID
    - `event_type` (TEXT): 이벤트 타입 ('class' or 'evaluation')
    - `start_time` (DATETIME): 수업/평가 시작 시간
    - `end_time` (DATETIME): 수업/평가 종료 시간
    - `instructor_id` (FK, INTEGER): 담당 교관 ID

---

## 8. 향후 개선 과제 (Future Improvements)

- **다중 과정 지원:** 여러 교육 과정의 시간표를 동시에 관리하는 기능.
- **결과 export:** 생성된 시간표를 PDF 또는 엑셀 파일로 내보내는 기능.
- **교관용 뷰:** 교관이 로그인하여 자신의 시간표만 확인하는 기능.
- **자동 충돌 해결:** 시간표 생성 시 충돌이 발생할 경우, 시스템이 대안을 제시하는 기능.
